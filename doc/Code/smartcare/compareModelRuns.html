<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of compareModelRuns</title>
  <meta name="keywords" content="compareModelRuns">
  <meta name="description" content="">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../index.html">Home</a> &gt;  <a href="#">Code</a> &gt; <a href="index.html">smartcare</a> &gt; compareModelRuns.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../index.html"><img alt="<" border="0" src="../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for Code/smartcare&nbsp;<img alt=">" border="0" src="../../right.png"></a></td></tr></table>-->

<h1>compareModelRuns
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong></strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function compareModelRuns(modelrun1, modelidx1, modelrun2, modelidx2) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"></pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="createFigureAndPanel.html" class="code" title="function [f, p] = createFigureAndPanel(name, orientation, pagesize)">createFigureAndPanel</a>	createFigureAndPanel - creates a figure with a ui panel and returns</li><li><a href="plotExStart.html" class="code" title="function [xl, yl] = plotExStart(ax, ex_start, offset, xl, yl, colour, linestyle, linewidth)">plotExStart</a>	plotExStart - plots the predicted exacerbation start plus average</li><li><a href="plotHorizontalLine.html" class="code" title="function [xl, yl] = plotHorizontalLine(ax, yval, xl, yl, colour, linestyle, linewidth)">plotHorizontalLine</a>	plotHotizontalLine - plots a horizontal line</li><li><a href="plotLatentCurve.html" class="code" title="function [xl, yl] = plotLatentCurve(ax, max_offset, align_wind, offset, meancurve, xl, yl, colour, linestyle, linewidth, anchor)">plotLatentCurve</a>	plotLatentCurve - plots the latent curve actual and smoothed</li><li><a href="plotMeasurementData.html" class="code" title="function [xl, yl] = plotMeasurementData(ax, days, mdata, xl, yl, measure, colour, linestyle, linewidth, marker, markersize, markerec, markerfc)">plotMeasurementData</a>	plotMeasurementDataAndMean - plots the measurement data along with the mean and</li><li><a href="plotProbDistribution.html" class="code" title="function [xl, yl] = plotProbDistribution(ax, max_offset, pdoffset, xl, yl, marker, linewidth, markersize, markerec, markerfc)">plotProbDistribution</a>	plotProbDistribution - plots a prob distribution</li><li><a href="plotVerticalLine.html" class="code" title="function [xl, yl] = plotVerticalLine(ax, xval, xl, yl, colour, linestyle, linewidth)">plotVerticalLine</a>	plotVerticalLine - plots a vertical line</li><li><a href="savePlotInDir.html" class="code" title="function savePlotInDir(f, name, subfolder)">savePlotInDir</a>	savePlots - saves the figure to png and svp file types in the specified</li><li><a href="setBaseDir.html" class="code" title="function [basedir] = setBaseDir()">setBaseDir</a>	setBaseDir - sets the root directory for the code, plots, data files etc</li></ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="runModelUtilityFunctions.html" class="code" title="">runModelUtilityFunctions</a>	</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function compareModelRuns(modelrun1, modelidx1, modelrun2, modelidx2)</a>
0002 
0003 fprintf(<span class="string">'\n'</span>);
0004 basedir = <a href="setBaseDir.html" class="code" title="function [basedir] = setBaseDir()">setBaseDir</a>();
0005 subfolder = <span class="string">'MatlabSavedVariables'</span>;
0006 fprintf(<span class="string">'Loading output from first model run\n'</span>);
0007 load(fullfile(basedir, subfolder, sprintf(<span class="string">'%s.mat'</span>, modelrun1)));
0008 
0009 amDatacube1           = amDatacube;
0010 amIntrDatacube1       = amIntrDatacube;
0011 amIntrNormcube1       = amIntrNormcube;
0012 amHeldBackcube1       = amHeldBackcube;
0013 amImputedCube1        = amImputedCube;
0014 isOutlier1            = isOutlier;
0015 outprior1             = outprior;
0016 totaloutliers1        = totaloutliers;
0017 totalpoints1          = totalpoints;
0018 amInterventions1      = amInterventions;
0019 meancurvesumsq1       = meancurvesumsq;
0020 meancurvesum1         = meancurvesum;
0021 meancurvecount1       = meancurvecount;
0022 meancurvemean1        = meancurvemean;
0023 meancurvestd1         = meancurvestd;
0024 initial_offsets1      = initial_offsets;
0025 offsets1              = offsets;
0026 qual1                 = qual;
0027 unaligned_profile1    = unaligned_profile;
0028 hstg1                 = hstg;
0029 pdoffset1             = pdoffset;
0030 overall_hist1         = overall_hist;
0031 overall_pdoffset1     = overall_pdoffset;
0032 sorted_interventions1 = sorted_interventions;
0033 normmean1             = normmean;
0034 normstd1              = normstd;
0035 measures1             = measures;
0036 study1                = study;
0037 mversion1             = mversion;
0038 sigmamethod1          = sigmamethod;
0039 mumethod1             = mumethod;
0040 curveaveragingmethod1 = curveaveragingmethod;
0041 smoothingmethod1      = smoothingmethod;
0042 measuresmask1         = measuresmask;
0043 runmode1              = runmode;
0044 imputationmode1       = imputationmode;
0045 printpredictions1     = printpredictions;
0046 max_offset1           = max_offset;
0047 align_wind1           = align_wind;
0048 ex_start1             = ex_start;
0049 nmeasures1            = nmeasures;
0050 ninterventions1       = ninterventions;
0051 
0052 fprintf(<span class="string">'Loading output from second model run\n'</span>);
0053 load(fullfile(basedir, subfolder, sprintf(<span class="string">'%s.mat'</span>, modelrun2)));
0054 
0055 amDatacube2           = amDatacube;
0056 amIntrDatacube2       = amIntrDatacube;
0057 amIntrNormcube2       = amIntrNormcube;
0058 amHeldBackcube2       = amHeldBackcube;
0059 amImputedCube2        = amImputedCube;
0060 isOutlier2            = isOutlier;
0061 outprior2             = outprior;
0062 totaloutliers2        = totaloutliers;
0063 totalpoints2          = totalpoints;
0064 amInterventions2      = amInterventions;
0065 meancurvesumsq2       = meancurvesumsq;
0066 meancurvesum2         = meancurvesum;
0067 meancurvecount2       = meancurvecount;
0068 meancurvemean2        = meancurvemean;
0069 meancurvestd2         = meancurvestd;
0070 initial_offsets2      = initial_offsets;
0071 offsets2              = offsets;
0072 qual2                 = qual;
0073 unaligned_profile2    = unaligned_profile;
0074 hstg2                 = hstg;
0075 pdoffset2             = pdoffset;
0076 overall_hist2         = overall_hist;
0077 overall_pdoffset2     = overall_pdoffset;
0078 sorted_interventions2 = sorted_interventions;
0079 normmean2             = normmean;
0080 normstd2              = normstd;
0081 measures2             = measures;
0082 study2                = study;
0083 mversion2             = mversion;
0084 sigmamethod2          = sigmamethod;
0085 mumethod2             = mumethod;
0086 curveaveragingmethod2 = curveaveragingmethod;
0087 smoothingmethod2      = smoothingmethod;
0088 measuresmask2         = measuresmask;
0089 runmode2              = runmode;
0090 imputationmode2       = imputationmode;
0091 printpredictions2     = printpredictions;
0092 max_offset2           = max_offset;
0093 align_wind2           = align_wind;
0094 ex_start2             = ex_start;
0095 nmeasures2            = nmeasures;
0096 ninterventions2       = ninterventions;
0097 
0098 fprintf(<span class="string">'\n'</span>);
0099 fprintf(<span class="string">'Comparing models:\n'</span>);
0100 fprintf(<span class="string">'%s\n'</span>, modelrun1);
0101 fprintf(<span class="string">'%s\n'</span>, modelrun2);
0102 fprintf(<span class="string">'\n'</span>);
0103 
0104 plotsdown = 9;
0105 plotsacross = 5;
0106 mpos = [ 1 2 6 7 ; 3 4 8 9 ; 11 12 16 17 ; 13 14 18 19 ; 21 22 26 27 ; 23 24 28 29 ; 31 32 36 37 ; 33 34 38 39];
0107 hpos = [ 5 ; 10 ; 15 ; 20 ; 25 ; 30 ; 35 ; 40 ; 45 ; 44 ; 43 ; 42 ; 41 ];
0108 days = [-1 * (max_offset1 + align_wind1 - 1): -1];
0109 anchor = 0; <span class="comment">% latent curve is to be shifted by offset on the plot</span>
0110 
0111 <span class="comment">% comparing offsets</span>
0112 fprintf(<span class="string">'Comparing offsets:\n\n'</span>);
0113 offset_array = [amInterventions1.Offset, amInterventions2.Offset, amInterventions1.Offset - amInterventions2.Offset];
0114 
0115 mismatch_threshold = 3;
0116 mismatchidx = find(abs(amInterventions1.Offset - amInterventions2.Offset) &gt;= mismatch_threshold);
0117 
0118 mkdir(plotsubfolder);
0119 
0120 plotsubfolder = strcat(<span class="string">'./Plots/'</span>, sprintf(<span class="string">'%s Prediction Comparison %sm%d vs %sm%d'</span>, study1, mversion1, modelidx1, mversion2, modelidx2));
0121 mkdir(plotsubfolder);
0122 
0123 <span class="keyword">for</span> i = 0:max_offset-1
0124     idx = find(abs(amInterventions1.Offset - amInterventions2.Offset) == i);
0125     <span class="keyword">if</span> (size(idx,1) &gt; 0)
0126         fprintf(<span class="string">'+/-%d days: %2d of %2d interventions\n'</span>, i, size(idx,1), ninterventions1);
0127         <span class="keyword">if</span> i &lt; mismatch_threshold
0128             <span class="keyword">for</span> a = 1:size(idx,1)
0129                 fprintf(<span class="string">'%2d '</span>, idx(a));
0130                 <span class="keyword">if</span> (a/20 == round(a/20))
0131                     fprintf(<span class="string">'\n'</span>);
0132                 <span class="keyword">end</span>
0133             <span class="keyword">end</span>
0134             fprintf(<span class="string">'\n\n'</span>);
0135         <span class="keyword">else</span>
0136             <span class="keyword">for</span> a = 1:size(idx,1)
0137                 actualpoints1 = 0;
0138                 maxpoints1 = 0;
0139                 actualpoints2 = 0;
0140                 maxpoints2 = 0;
0141                 <span class="keyword">for</span> m = 1:nmeasures
0142                     <span class="keyword">if</span> (measures1.Mask(m) == 1)
0143                         actualpoints1 = actualpoints1 + sum(~isnan(amIntrDatacube1(idx(a), max_offset1:max_offset1+align_wind1-1, m)));
0144                         maxpoints1 = maxpoints1 + align_wind1;
0145                     <span class="keyword">end</span>
0146                     <span class="keyword">if</span> (measures2.Mask(m) == 1)
0147                         actualpoints2 = actualpoints2 + sum(~isnan(amIntrDatacube2(idx(a), max_offset2:max_offset2+align_wind2-1, m)));
0148                         maxpoints2 = maxpoints2 + align_wind2;
0149                     <span class="keyword">end</span>  
0150                 <span class="keyword">end</span>
0151                 datacompleteness1 = 100 * actualpoints1/maxpoints1;
0152                 datacompleteness2 = 100 * actualpoints2/maxpoints2;
0153                 
0154                 fprintf(<span class="string">'%2d: Offset %2d vs %2d, Data Completeness = %.2f%% %.2f%%\n'</span>, idx(a), offset_array(idx(a),1), <span class="keyword">...</span>
0155                     offset_array(idx(a),2), datacompleteness1, datacompleteness2);
0156                 scid = amInterventions1.SmartCareID(idx(a));
0157                 name = sprintf(<span class="string">'%s Prediction Comparison %sm%d vs %sm%d - Ex %d (ID %d Date %s) Offset %2d vs %2d'</span>, <span class="keyword">...</span>
0158                     study1, mversion1, modelidx1, mversion2, modelidx2, idx(a), scid, <span class="keyword">...</span>
0159                     datestr(amInterventions1.IVStartDate(idx(a)),29), offset_array(idx(a),1), offset_array(idx(a),2));
0160                 
0161                 [f, p] = <a href="createFigureAndPanel.html" class="code" title="function [f, p] = createFigureAndPanel(name, orientation, pagesize)">createFigureAndPanel</a>(name, <span class="string">'portrait'</span>, <span class="string">'a4'</span>);
0162                 
0163                 <span class="keyword">for</span> m = 1:nmeasures
0164                     <span class="keyword">if</span> all(isnan(amIntrDatacube(idx(a), :, m)))
0165                         <span class="keyword">continue</span>;
0166                     <span class="keyword">end</span>
0167                     
0168                     <span class="keyword">if</span> sigmamethod1 == 4
0169                         adjmeancurvemean1 = (meancurvemean1(:,m) * normstd1(idx(a), m)) + normmean1(idx(a), m);
0170                     <span class="keyword">else</span>
0171                         adjmeancurvemean1 =  meancurvemean1(:,m) + normmean1(idx(a), m);
0172                     <span class="keyword">end</span>
0173                     <span class="keyword">if</span> sigmamethod2 == 4
0174                         adjmeancurvemean2 = (meancurvemean2(:,m) * normstd2(idx(a), m)) + normmean2(idx(a), m);
0175                     <span class="keyword">else</span>
0176                         adjmeancurvemean2 =  meancurvemean2(:,m) + normmean2(idx(a), m);
0177                     <span class="keyword">end</span>
0178                     
0179                     <span class="comment">% initialise plot areas</span>
0180                     xl = [0 0];
0181                     yl = [min(adjmeancurvemean2(1:max_offset2 + align_wind2 - 1 - amInterventions2.Offset(idx(a))) * .99) <span class="keyword">...</span>
0182                           max(adjmeancurvemean2(1:max_offset2 + align_wind2 - 1 - amInterventions2.Offset(idx(a))) * 1.01)];
0183                     <span class="comment">% create subplot and plot required data arrays</span>
0184                     ax = subplot(plotsdown, plotsacross, mpos(m,:), <span class="string">'Parent'</span>,p);
0185                     
0186                     [xl, yl] = <a href="plotMeasurementData.html" class="code" title="function [xl, yl] = plotMeasurementData(ax, days, mdata, xl, yl, measure, colour, linestyle, linewidth, marker, markersize, markerec, markerfc)">plotMeasurementData</a>(ax, days, amIntrDatacube1(idx(a), :, m), xl, yl, measures1(m,:), [0, 0.65, 1], <span class="string">'-'</span>, 1.0, <span class="string">'o'</span>, 2.0, <span class="string">'blue'</span>, <span class="string">'green'</span>);
0187                     <span class="keyword">if</span> measures1.Mask(m) == 1 &amp;&amp; measures2.Mask(m) == 1
0188                         title(measures1.DisplayName(m), <span class="string">'FontSize'</span>, 6, <span class="string">'BackgroundColor'</span>, <span class="string">'yellow'</span>);
0189                     <span class="keyword">elseif</span> measures1.Mask(m) == 1
0190                         title(measures1.DisplayName(m), <span class="string">'FontSize'</span>, 6, <span class="string">'BackgroundColor'</span>, <span class="string">'cyan'</span>);
0191                     <span class="keyword">elseif</span> measures2.Mask(m) == 1
0192                         title(measures1.DisplayName(m), <span class="string">'FontSize'</span>, 6, <span class="string">'BackgroundColor'</span>, <span class="string">'green'</span>);
0193                     <span class="keyword">else</span>
0194                         title(measures1.DisplayName(m),<span class="string">'FontSize'</span>, 6);
0195                     <span class="keyword">end</span>
0196                     
0197                     [xl, yl] = <a href="plotHorizontalLine.html" class="code" title="function [xl, yl] = plotHorizontalLine(ax, yval, xl, yl, colour, linestyle, linewidth)">plotHorizontalLine</a>(ax, normmean1(idx(a), m), xl, yl, <span class="string">'blue'</span>, <span class="string">'--'</span>, 0.5); <span class="comment">% plot mean</span>
0198                     
0199                     [xl, yl] = <a href="plotLatentCurve.html" class="code" title="function [xl, yl] = plotLatentCurve(ax, max_offset, align_wind, offset, meancurve, xl, yl, colour, linestyle, linewidth, anchor)">plotLatentCurve</a>(ax, max_offset1, align_wind1, amInterventions1.Offset(idx(a)), adjmeancurvemean1, xl, yl, <span class="string">'red'</span>, <span class="string">':'</span>, 1.0, anchor);
0200                     [xl, yl] = <a href="plotLatentCurve.html" class="code" title="function [xl, yl] = plotLatentCurve(ax, max_offset, align_wind, offset, meancurve, xl, yl, colour, linestyle, linewidth, anchor)">plotLatentCurve</a>(ax, max_offset1, align_wind1, amInterventions1.Offset(idx(a)), smooth(adjmeancurvemean1,5), xl, yl, <span class="string">'red'</span>, <span class="string">'-'</span>, 1.0, anchor);
0201                    
0202                     [xl, yl] = <a href="plotLatentCurve.html" class="code" title="function [xl, yl] = plotLatentCurve(ax, max_offset, align_wind, offset, meancurve, xl, yl, colour, linestyle, linewidth, anchor)">plotLatentCurve</a>(ax, max_offset2, align_wind2, amInterventions2.Offset(idx(a)), adjmeancurvemean2, xl, yl, <span class="string">'magenta'</span>, <span class="string">':'</span>, 1.0, anchor);
0203                     [xl, yl] = <a href="plotLatentCurve.html" class="code" title="function [xl, yl] = plotLatentCurve(ax, max_offset, align_wind, offset, meancurve, xl, yl, colour, linestyle, linewidth, anchor)">plotLatentCurve</a>(ax, max_offset2, align_wind2, amInterventions2.Offset(idx(a)), smooth(adjmeancurvemean2,5), xl, yl, <span class="string">'magenta'</span>, <span class="string">'-'</span>, 1.0, anchor);
0204                     
0205                     [xl, yl] = <a href="plotExStart.html" class="code" title="function [xl, yl] = plotExStart(ax, ex_start, offset, xl, yl, colour, linestyle, linewidth)">plotExStart</a>(ax, ex_start1, amInterventions1.Offset(idx(a)), xl, yl,  <span class="string">'red'</span>, <span class="string">'-'</span>, 0.5);
0206                     [xl, yl] = <a href="plotExStart.html" class="code" title="function [xl, yl] = plotExStart(ax, ex_start, offset, xl, yl, colour, linestyle, linewidth)">plotExStart</a>(ax, ex_start2, amInterventions2.Offset(idx(a)), xl, yl, <span class="string">'magenta'</span>, <span class="string">'-'</span>, 0.5);
0207                     
0208                     [xl, yl] = <a href="plotVerticalLine.html" class="code" title="function [xl, yl] = plotVerticalLine(ax, xval, xl, yl, colour, linestyle, linewidth)">plotVerticalLine</a>(ax, 0, xl, yl, <span class="string">'cyan'</span>, <span class="string">'-'</span>, 0.5); <span class="comment">% plot treatment start</span>
0209                     
0210                     xl2 = [0 max_offset-1];
0211                     yl2 = [0 0.25];
0212                     
0213                     ax2 = subplot(plotsdown, plotsacross, hpos(m,:),<span class="string">'Parent'</span>,p); 
0214                     
0215                     [xl2, yl2] = <a href="plotProbDistribution.html" class="code" title="function [xl, yl] = plotProbDistribution(ax, max_offset, pdoffset, xl, yl, marker, linewidth, markersize, markerec, markerfc)">plotProbDistribution</a>(ax2, max_offset1, pdoffset1(m, idx(a),:), xl2, yl2, <span class="string">'o'</span>, 0.5, 2.0, <span class="string">'blue'</span>, <span class="string">'blue'</span>);
0216                     [xl2, yl2] = <a href="plotProbDistribution.html" class="code" title="function [xl, yl] = plotProbDistribution(ax, max_offset, pdoffset, xl, yl, marker, linewidth, markersize, markerec, markerfc)">plotProbDistribution</a>(ax2, max_offset2, pdoffset2(m, idx(a),:), xl2, yl2, <span class="string">'o'</span>, 0.5, 2.0, <span class="string">'green'</span>, <span class="string">'green'</span>); 
0217                     
0218                     [xl2, yl2] = <a href="plotVerticalLine.html" class="code" title="function [xl, yl] = plotVerticalLine(ax, xval, xl, yl, colour, linestyle, linewidth)">plotVerticalLine</a>(ax2, amInterventions1.Offset(idx(a)), xl2, yl2, <span class="string">'blue'</span>, <span class="string">'-'</span>, 0.5); <span class="comment">% plot predicted offset</span>
0219                     [xl2, yl2] = <a href="plotVerticalLine.html" class="code" title="function [xl, yl] = plotVerticalLine(ax, xval, xl, yl, colour, linestyle, linewidth)">plotVerticalLine</a>(ax2, amInterventions2.Offset(idx(a)), xl2, yl2, <span class="string">'green'</span>, <span class="string">'-'</span>, 0.5); <span class="comment">% plot predicted offset</span>
0220                     
0221                     set(gca,<span class="string">'fontsize'</span>,6);
0222                     <span class="keyword">if</span> measures1.Mask(m) == 1 &amp;&amp; measures2.Mask(m) == 1
0223                         title(sprintf(<span class="string">'%s %.1f %.1f'</span>, measures1.DisplayName{m}, hstg1(m, idx(a), amInterventions1.Offset(idx(a)) + 1), <span class="keyword">...</span>
0224                             hstg2(m, idx(a), amInterventions2.Offset(idx(a)) + 1)), <span class="string">'BackgroundColor'</span>, <span class="string">'yellow'</span>);
0225                     <span class="keyword">elseif</span> measures1.Mask(m) == 1
0226                         title(sprintf(<span class="string">'%s %.1f %.1f'</span>, measures1.DisplayName{m}, hstg1(m, idx(a), amInterventions1.Offset(idx(a)) + 1), <span class="keyword">...</span>
0227                             hstg2(m, idx(a), amInterventions2.Offset(idx(a)) + 1)), <span class="string">'BackgroundColor'</span>, <span class="string">'cyan'</span>);
0228                     <span class="keyword">elseif</span> measures2.Mask(m) == 1
0229                         title(sprintf(<span class="string">'%s %.1f %.1f'</span>, measures1.DisplayName{m}, hstg1(m, idx(a), amInterventions1.Offset(idx(a)) + 1), <span class="keyword">...</span>
0230                             hstg2(m, idx(a), amInterventions2.Offset(idx(a)) + 1)), <span class="string">'BackgroundColor'</span>, <span class="string">'green'</span>);
0231                     <span class="keyword">else</span>
0232                         title(sprintf(<span class="string">'%s %.1f %.1f'</span>, measures1.DisplayName{m}, hstg1(m, idx(a), amInterventions1.Offset(idx(a)) + 1), <span class="keyword">...</span>
0233                             hstg2(m, idx(a), amInterventions2.Offset(idx(a)) + 1)));
0234                     <span class="keyword">end</span>
0235                     
0236                 <span class="keyword">end</span>
0237                 
0238                 xl2 = [0 max_offset-1];
0239                 yl2 = [0 0.25];
0240                 
0241                 ax2 = subplot(plotsdown, plotsacross, hpos(nmeasures + 1,:),<span class="string">'Parent'</span>,p); 
0242                 
0243                 [xl2, yl2] = <a href="plotProbDistribution.html" class="code" title="function [xl, yl] = plotProbDistribution(ax, max_offset, pdoffset, xl, yl, marker, linewidth, markersize, markerec, markerfc)">plotProbDistribution</a>(ax2, max_offset1, overall_pdoffset1(idx(a),:), xl2, yl2, <span class="string">'o'</span>, 0.5, 2.0, <span class="string">'blue'</span>, <span class="string">'blue'</span>);
0244                 [xl2, yl2] = <a href="plotProbDistribution.html" class="code" title="function [xl, yl] = plotProbDistribution(ax, max_offset, pdoffset, xl, yl, marker, linewidth, markersize, markerec, markerfc)">plotProbDistribution</a>(ax2, max_offset2, overall_pdoffset2(idx(a),:), xl2, yl2, <span class="string">'o'</span>, 0.5, 2.0, <span class="string">'green'</span>, <span class="string">'green'</span>); 
0245                     
0246                 [xl2, yl2] = <a href="plotVerticalLine.html" class="code" title="function [xl, yl] = plotVerticalLine(ax, xval, xl, yl, colour, linestyle, linewidth)">plotVerticalLine</a>(ax2, amInterventions1.Offset(idx(a)), xl2, yl2, <span class="string">'blue'</span>, <span class="string">'-'</span>, 0.5); <span class="comment">% plot predicted offset</span>
0247                 [xl2, yl2] = <a href="plotVerticalLine.html" class="code" title="function [xl, yl] = plotVerticalLine(ax, xval, xl, yl, colour, linestyle, linewidth)">plotVerticalLine</a>(ax2, amInterventions2.Offset(idx(a)), xl2, yl2, <span class="string">'green'</span>, <span class="string">'-'</span>, 0.5); <span class="comment">% plot predicted offset</span>
0248                 
0249                 set(gca,<span class="string">'fontsize'</span>,6);
0250                 title(sprintf(<span class="string">'Overall %.1f %.1f'</span>, overall_hist1(idx(a), amInterventions1.Offset(idx(a)) + 1), <span class="keyword">...</span>
0251                     overall_hist2(idx(a), amInterventions2.Offset(idx(a)) + 1)), <span class="string">'BackgroundColor'</span>, <span class="string">'yellow'</span>);
0252                 
0253                 <a href="savePlotInDir.html" class="code" title="function savePlotInDir(f, name, subfolder)">savePlotInDir</a>(f, name, plotsubfolder);
0254                 close(f);
0255             <span class="keyword">end</span>
0256             fprintf(<span class="string">'\n'</span>);
0257         <span class="keyword">end</span>
0258     <span class="keyword">end</span>
0259 <span class="keyword">end</span>
0260 
0261 <span class="keyword">end</span>
0262 
0263 
0264 
0265 
0266 
0267 
0268 
0269 
0270</pre></div>
<hr><address>Generated on Tue 24-Aug-2021 16:59:35 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>